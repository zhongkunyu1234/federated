# 联邦学习模拟实验平台用户使用手册

### 1. 产品概述
联邦学习模拟实验平台是一个基于PyTorch开发、集成了图形化用户界面的仿真系统。它旨在帮助用户无需编写代码即可轻松配置、运行并可视化联邦学习任务，尤其支持对同步更新、异步更新及缓存辅助异步等多种训练策略的对比实验。本平台适用于机器学习研究者、学生及开发者快速验证算法性能和数据分布对联邦学习的影响。

### 2. 系统要求与安装
#### 2.1 系统要求
操作系统：Windows 10/11
Python版本：3.7或更高版本
硬件建议：配备独立GPU以获得更佳的训练速度

#### 2.2 安装步骤
（1）安装Python依赖：确保已安装pip，然后在命令行中运行以下命令，一键安装所有必需的库：
```bash
pip install -r requirements.txt
```
这将会安装PyTorch、Matplotlib、Pillow等核心依赖。
（2）获取项目代码：
将完整的项目代码目录下载到您的计算机上。
```bash
https://github.com/zhongkunyu1234/federated.git
```
（3）准备数据集：
平台已内置对MNIST和CIFAR-10数据集的支持，首次运行时会自动下载。
若要使用自定义数据集，请将图像数据按类别放入不同的子文件夹中，并组织成一个主目录。

### 3. 快速开始
#### 3.1 启动平台
在命令行中，进入项目根目录，运行以下命令：
```bash
python ui.py
```
成功启动后，您将看到主程序窗口，其界面由清晰的四步引导式流程构成。

#### 3.2 四步操作指南
（1）第1步：选择数据类型
MNIST：适用于手写数字识别任务的快速验证。
CIFAR-10：适用于更复杂的彩色图像分类任务。
自定义：选择此项后，请点击“浏览”按钮，选择您已准备好的本地数据集目录。
（2）第2步：配置训练目标与超参数
快速验证：系统会自动设置较少的训练轮数（100轮），以便快速获得初步结果。
正式研究：系统会设置较多的训练轮数（1000轮），以期获得更精确的模型性能。
超参数： 您可以根据需要，手动修改训练轮数（Epochs）、批大小（Batch Size）和学习率（Learning Rate）。
（3）第3步：选择训练策略
同步策略 (FedAvg)：稳定性高，收敛性好，推荐初学者使用。
异步策略 (FedAsync)：训练速度快，吞吐量高，但对超参数更敏感。
缓存辅助异步 (CA2FL)：在异步基础上改进，能更好地处理数据异构性，收敛更快更稳定。
选择您想尝试的策略，点击对应的单选按钮即可。
（4）第4步：监控训练与查看结果
点击“开始训练”后，界面将跳转到监控页面。
实时日志：下方文本区域会实时滚动显示训练过程的详细日志。
进度条：上方进度条会以平滑动画显示当前训练进度。
结果图表：训练完成后，系统会自动加载并显示保存在./log/目录下的结果对比图（training_curves.png），直观展示准确率和损失变化曲线。

### 4. 功能详解
#### 4.1 可视化功能
（1）引导式界面：极简的四步操作流程，避免了复杂的命令行参数配置。
（2）实时监控：训练日志实时输出，进度条平滑更新，让您随时掌握任务状态。
（3）自动可视化：训练结束后自动绘制并显示准确率/损失曲线图，便于直观分析模型性能。

#### 4.2 算法支持
本平台实现了三种联邦学习聚合算法：
FedAvg (同步)
FedAsync (异步)
FedCA2FL (缓存辅助异步)

#### 4.3 数据支持
支持 IID (独立同分布)与Non-IID (非独立同分布)数据分区模拟，您可以在不同的实验中选择不同的数据分布来验证算法鲁棒性。

### 5. 常见问题 (FAQ)
Q1: 训练过程中程序无响应或卡住了？
A： 这是正常的，因为训练任务正在后台全力运行。GUI界面采用了多线程设计，前台界面可能会在CPU高负载时暂时停止响应，待训练任务完成后会自动恢复。请勿强行关闭程序。
Q2: 训练完成后没有显示结果图？
A： 请首先检查项目根目录下的./log/文件夹是否存在training_curves.png文件。如果不存在，可能是后端绘图代码未正确执行。请检查命令行窗口是否有报错信息。
Q3: 如何复现某次实验？
A： 平台目前通过固定随机数种子来保证结果的可复现性。您需要记录下本次训练所选择的所有配置参数，下次以相同配置运行即可获得相似结果。
Q4: 如何使用自己的数据集？
A： 请将您的数据集组织成ImageFolder格式，然后在第一步中选择“自定义”并指定该数据集目录的路径即可。具体可参考如下网址：
```bash
https://github.com/Hcheng-ya/async_fl
```

### 6. 获取支持
检查./log/目录下的日志文件以获取更详细的错误信息。